<IfModule disp_apache2.c>
  # location of the configuration file. eg: 'conf/dispatcher.any'
  <% if @apache_dispatcher_conf -%>
  DispatcherConfig <%= @apache_dispatcher_conf %>
  <% else -%>
  DispatcherConfig dispatcher.any
  <% end -%>

  # location of the dispatcher log file. eg: '/var/log/apache2/dispatcher.log'
  <% if @apache_dispatcher_log -%>
  DispatcherLog <%= scope.lookupvar('apache::params::apache_log_dir') %>/<%= @apache_dispatcher_log %>
  <% else -%>
  DispatcherLog <%= scope.lookupvar('apache::params::apache_log_dir') %>/dispatcher.log
  <% end -%>

  # log level for the dispatcher log
  # 0 Errors
  # 1 Warnings
  # 2 Infos
  # 3 Debug
  <% if @apache_dispatcher_log_level and [0,1,2,3].to_s.include? @apache_dispatcher_log_level -%>
  DispatcherLogLevel <%= @apache_dispatcher_log_level %>
  <% else -%>
  DispatcherLogLevel 0
  <% end -%>

  # if turned to 1, the dispatcher looks like a normal module
  <% if @apache_dispatcher_no_server_header and [0,1].to_s.include? @apache_dispatcher_no_server_header -%>
  DispatcherNoServerHeader <%= @apache_dispatcher_no_server_header -%>
  <% else -%>
  DispatcherNoServerHeader 0
  <% end -%>

  # if turned to 1, request to / are not handled by the dispatcher
  # use the mod_alias then for the correct mapping
  <% if @apache_dispatcher_decline_root and [0,1].to_s.include? @apache_dispatcher_decline_root -%>
  DispatcherDeclineRoot <%= @apache_dispatcher_decline_root %>
  <% else -%>
  DispatcherDeclineRoot 0
  <% end -%>

  # if turned to 1, the dispatcher uses the URL already processed
  # by handlers preceeding the dispatcher (i.e. mod_rewrite)
  # instead of the original one passed to the web server.
  <% if @apache_dispatcher_use_processed_url and [0,1].to_s.include? @apache_dispatcher_use_processed_url -%>
  DispatcherUseProcessedURL <%= @apache_dispatcher_use_processed_url -%>
  <% else -%>
  DispatcherUseProcessedURL 1
  <% end -%>

  # if turned to 1, the dispatcher does not spool an error
  # response to the client (where the status code is greater
  # or equal than 400), but passes the status code to
  # Apache, which e.g. allows an ErrorDocument directive
  # to process such a status code. 
  <% if @apache_dispatcher_pass_error and [0,1].to_s.include? @apache_dispatcher_pass_error -%>
  DispatcherPassError <%= @apache_dispatcher_pass_error %>
  <% else -%>
  DispatcherPassError 1
  <% end -%>

</IfModule>
