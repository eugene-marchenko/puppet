# ~/.profile: executed by the command interpreter for login shells.
# This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login
# exists.
# see /usr/share/doc/bash/examples/startup-files for examples.
# the files are located in the bash-doc package.

# the default umask is set in /etc/profile
#umask 022

# Terminal character enhancements

       export HB=$(/usr/bin/tput dim)          # dim text
       export HV=$(/usr/bin/tput smso)         # 1/2 bright inverse
       export IV=$(/usr/bin/tput bold)         # inverse
       export UL=$(/usr/bin/tput smul)         # underline
       export BL=$(/usr/bin/tput blink)        # blink
       export EE=$(/usr/bin/tput sgr0)         # end all enhancements

# if running bash
if [ -n "$BASH_VERSION" ]; then
    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
	. "$HOME/.bashrc"
    fi
fi

if [ -n "$BASH_VERSION" ]; then
    # include .environment if it exists
    if [ -f ~/.environment ]; then
          . ~/.environment
    fi
fi

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi


echo -e "\n\n${UL}\t\t\t\tSecurity information\t\t\t\t${EE}"

# $NUM is the number of bad logins, good logins and su attempts to list

        NUM=5
        MYUSERID=$(/usr/bin/whoami)

# Successful logins
# -----------------
   
        echo -e "\n${UL}Last $NUM succesful $MYUSERID logins:${EE} (last -R -$NUM $MYUSERID)"
        /usr/bin/last -R -$NUM $MYUSERID


# For root users, show who else mught be logged on as root too
# To significantly improve the performance here, who -R has been
# replaced with who -q as a quick count of root users. If there
# are multiple root users, then show the root user logins and tty
# or terminal address only if $SECURITY is true.  On a really
# busy machine with hundreds of logins, this will take some
# time.

        ROOTERS=$(who -q | tr " " "\n" | grep root | wc -l)


        # Display Recent Shutdowns for Root User
        if [ $ROOTERS -gt 0 ] && [ "$MYUSERID" = "root" ]
        then
            echo -e "\n${UL}Recent shutdowns:${EE} (/usr/bin/last -x | grep -i shutdown |head -${NUM})"
            /usr/bin/last -x | grep -i shutdown |head -${NUM}
            echo -e "\n"
        fi

        # Display Message if someone else is also loged in as root
        if [ $ROOTERS -gt 1 ] && [ "$MYUSERID" = "root" ]
        then
           echo -e "${HV}Note:${EE}  ${UL} $ROOTERS root users logged in${EE}"
           echo  -e "       ${UL} Be sure to coordinate root activities${EE}\n"
            who -u | grep root
        fi

echo -e "\n"
